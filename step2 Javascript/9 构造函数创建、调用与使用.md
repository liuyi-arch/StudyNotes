# **JavaScript æ„é€ å‡½æ•°**
æ„é€ å‡½æ•°ï¼ˆConstructor Functionï¼‰æ˜¯ç”¨äº**åˆ›å»ºå¯¹è±¡çš„ç‰¹æ®Šå‡½æ•°**ï¼Œå®ƒå¯ä»¥æ‰¹é‡ç”Ÿæˆå…·æœ‰ç›¸åŒå±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡ã€‚

---

## **1. æ„é€ å‡½æ•°çš„æ¦‚å¿µ**
æ„é€ å‡½æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª**æ™®é€šå‡½æ•°**ï¼Œä½†ç”¨äºåˆ›å»ºå¯¹è±¡ã€‚
> å‘½åæƒ¯ä¾‹ï¼š**é¦–å­—æ¯å¤§å†™**ï¼ˆå¦‚ `Person`ï¼‰ã€‚
> éœ€è¦ç”¨ `new` å…³é”®å­—è°ƒç”¨ï¼Œ`this` ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚

---

## **2. åˆ›å»ºå’Œè°ƒç”¨æ„é€ å‡½æ•°**
### **2.1 åˆ›å»ºæ„é€ å‡½æ•°**
```js
function Person(name, age) {
    this.name = name;
    this.age = age;
    this.sayHello = function() {
        console.log(`Hello, my name is ${this.name}`);
    };
}
```
### **2.2 é€šè¿‡ `new` å…³é”®å­—è°ƒç”¨**
```js
const p1 = new Person("Alice", 25);
const p2 = new Person("Bob", 30);

console.log(p1.name); // Alice
console.log(p2.age);  // 30
p1.sayHello(); // Hello, my name is Alice
```
**è§£æ `new` è¿‡ç¨‹ï¼š**
1. **åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡** `{}`ã€‚
2. **`this` ç»‘å®šåˆ°æ–°å¯¹è±¡**ã€‚
3. **æ‰§è¡Œæ„é€ å‡½æ•°ä»£ç **ï¼Œç»™æ–°å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚
4. **è¿”å›æ–°å¯¹è±¡**ï¼ˆå¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰ `return`ï¼‰ã€‚

---

## **3. æ„é€ å‡½æ•°ä¼˜åŒ–**
### **3.1 é¿å…æ–¹æ³•é‡å¤ï¼ˆä½¿ç”¨ `prototype`ï¼‰**
æ¯æ¬¡ `new` ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæ–¹æ³•éƒ½ä¼šé‡æ–°åˆ›å»ºï¼Œå ç”¨å†…å­˜ï¼š
```js
function Person(name, age) {
    this.name = name;
    this.age = age;
    this.sayHello = function() { // âŒ æ¯æ¬¡ new éƒ½ä¼šåˆ›å»ºæ–°æ–¹æ³•
        console.log(`Hello, my name is ${this.name}`);
    };
}
```
**ä¼˜åŒ–æ–¹æ³•ï¼šä½¿ç”¨ `prototype` è®©æ‰€æœ‰å®ä¾‹å…±äº«æ–¹æ³•**
```js
function Person(name, age) {
    this.name = name;
    this.age = age;
}

// å°†æ–¹æ³•å®šä¹‰åœ¨ `prototype` ä¸Š
Person.prototype.sayHello = function() {
    console.log(`Hello, my name is ${this.name}`);
};

const p1 = new Person("Charlie", 22);
const p2 = new Person("David", 28);
p1.sayHello(); // Hello, my name is Charlie
console.log(p1.sayHello === p2.sayHello); // âœ… trueï¼ˆæ–¹æ³•è¢«å…±äº«ï¼‰
```

---

## **4. `new` çš„æ¨¡æ‹Ÿå®ç°**
æ‰‹å†™ `new` å…³é”®å­—çš„æ‰§è¡Œè¿‡ç¨‹ï¼š
```js
function myNew(constructor, ...args) {
    let obj = {}; // 1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
    obj.__proto__ = constructor.prototype; // 2. å…³è”åŸå‹
    let result = constructor.apply(obj, args); // 3. æ‰§è¡Œæ„é€ å‡½æ•°
    return result instanceof Object ? result : obj; // 4. è¿”å›æ–°å¯¹è±¡
}

function Animal(type) {
    this.type = type;
}
const cat = myNew(Animal, "Cat");
console.log(cat.type); // "Cat"
```

---

## **5. `class` è¯­æ³•ç³–**
ES6 æä¾›äº† `class` è¯­æ³•ï¼Œæ›´åŠ æ¸…æ™°ï¼š
```js
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }

    sayHello() {
        console.log(`Hello, my name is ${this.name}`);
    }
}

const p1 = new Person("Eve", 35);
p1.sayHello(); // Hello, my name is Eve
```
**æœ¬è´¨ä¸Šè¿˜æ˜¯ä½¿ç”¨ `function + prototype` å®ç°çš„ã€‚**

---

## **6. ç»“è®º**
| æ–¹å¼ | ç‰¹ç‚¹ |
|------|------|
| **æ™®é€šå‡½æ•°** | ä¸èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹ï¼Œæ¯æ¬¡è°ƒç”¨è¿”å›æ–°å¯¹è±¡ |
| **æ„é€ å‡½æ•°ï¼ˆ`new`ï¼‰** | é€‚ç”¨äºæ‰¹é‡åˆ›å»ºå¯¹è±¡ï¼Œ`this` ç»‘å®šæ–°å¯¹è±¡ |
| **`prototype`** | å…±äº«æ–¹æ³•ï¼Œé¿å…é‡å¤åˆ›å»ºæ–¹æ³• |
| **ES6 `class`** | è¯­æ³•æ›´ç›´è§‚ï¼Œåº•å±‚ä»ç„¶åŸºäº `prototype` |

æ„é€ å‡½æ•°æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ï¼Œç†è§£ `new` å…³é”®å­—çš„æœºåˆ¶ï¼Œæœ‰åŠ©äºæ›´æ·±å…¥åœ°å­¦ä¹  JavaScriptï¼ğŸš€
