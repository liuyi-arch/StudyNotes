# React ç»„ä»¶åº“å®Œæ•´æ”¹è¿›æ–¹æ¡ˆ

## ğŸ¯ é¡¹ç›®æ•´ä½“æ¶æ„å‡çº§

### ç›®æ ‡æ¶æ„
```
react-component-library/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ components/           # ç»„ä»¶åº“ä¸»åŒ…
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ general/     # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Button/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Icon/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Typography/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-entry/  # æ•°æ®å½•å…¥ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Input/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Upload/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AutoComplete/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Select/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ data-display/ # æ•°æ®å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Table/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Card/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Avatar/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ feedback/    # åé¦ˆç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Message/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Loading/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Modal/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ navigation/  # å¯¼èˆªç»„ä»¶
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Menu/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Breadcrumb/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Pagination/
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/          # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ styles/         # æ ·å¼ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â”œâ”€â”€ tokens/               # è®¾è®¡ä»¤ç‰Œ
â”‚   â”œâ”€â”€ utils/               # å…±äº«å·¥å…·
â”‚   â””â”€â”€ docs/                # æ–‡æ¡£ç«™ç‚¹
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ storybook/           # Storybook åº”ç”¨
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ build/               # æ„å»ºè„šæœ¬
â”‚   â”œâ”€â”€ eslint-config/       # ESLint é…ç½®
â”‚   â””â”€â”€ jest-preset/         # Jest é…ç½®
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## ğŸš€ Phase 1: Monorepo æ¶æ„æ­å»º

### 1.1 åˆå§‹åŒ– pnpm workspace

```yaml
# pnpm-workspace.yaml
packages:
  - 'packages/*'
  - 'apps/*'
  - 'tools/*'
```

```json
# package.json (æ ¹ç›®å½•)
{
  "name": "@mylib/react-components",
  "private": true,
  "type": "module",
  "scripts": {
    "build": "pnpm -r --filter='!@mylib/docs' run build",
    "dev": "pnpm -r --parallel run dev",
    "test": "pnpm -r run test",
    "lint": "pnpm -r run lint",
    "format": "prettier --write .",
    "prepare": "husky install",
    "changeset": "changeset",
    "version": "changeset version",
    "publish": "pnpm build && changeset publish",
    "docs:dev": "pnpm --filter @mylib/docs dev",
    "docs:build": "pnpm --filter @mylib/docs build",
    "storybook": "pnpm --filter @mylib/storybook dev",
    "build-storybook": "pnpm --filter @mylib/storybook build"
  },
  "devDependencies": {
    "@changesets/cli": "^2.27.1",
    "@mylib/eslint-config": "workspace:*",
    "@types/node": "^20.10.0",
    "eslint": "^9.0.0",
    "husky": "^9.0.0",
    "lint-staged": "^15.2.0",
    "prettier": "^3.2.0",
    "stylelint": "^16.2.0",
    "typescript": "^5.3.0",
    "vitest": "^1.2.0"
  },
  "engines": {
    "node": ">=18.0.0",
    "pnpm": ">=8.0.0"
  }
}
```

### 1.2 ç»„ä»¶åº“ä¸»åŒ…é…ç½®

```json
# packages/components/package.json
{
  "name": "@mylib/components",
  "version": "1.0.0",
  "description": "React UI Component Library",
  "type": "module",
  "main": "./dist/index.js",
  "module": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "exports": {
    ".": {
      "import": "./dist/index.js",
      "types": "./dist/index.d.ts"
    },
    "./general/*": {
      "import": "./dist/components/general/*/index.js",
      "types": "./dist/components/general/*/index.d.ts"
    },
    "./data-entry/*": {
      "import": "./dist/components/data-entry/*/index.js", 
      "types": "./dist/components/data-entry/*/index.d.ts"
    },
    "./styles/*": "./dist/styles/*",
    "./package.json": "./package.json"
  },
  "files": [
    "dist",
    "README.md"
  ],
  "sideEffects": [
    "*.css",
    "*.scss"
  ],
  "peerDependencies": {
    "react": "^18.0.0 || ^19.0.0",
    "react-dom": "^18.0.0 || ^19.0.0"
  },
  "devDependencies": {
    "@mylib/tokens": "workspace:*",
    "@mylib/utils": "workspace:*",
    "@testing-library/jest-dom": "^6.2.0",
    "@testing-library/react": "^14.1.0",
    "@testing-library/user-event": "^14.5.0",
    "@types/react": "^18.2.0",
    "@vitejs/plugin-react": "^4.2.0",
    "jsdom": "^24.0.0",
    "vite": "^5.0.0",
    "vite-plugin-dts": "^3.7.0",
    "vitest": "^1.2.0"
  }
}
```

---

## ğŸ§© Phase 2: ç»„ä»¶åˆ†ç±»å®ç°

### 2.1 é€šç”¨ç»„ä»¶ - Button

```typescript
// packages/components/src/components/general/Button/Button.tsx
import React from 'react'
import { clsx } from 'clsx'
import { Icon } from '../Icon'
import styles from './Button.module.scss'

export interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  /** æŒ‰é’®ç±»å‹ */
  variant?: 'primary' | 'secondary' | 'outline' | 'text' | 'danger'
  /** æŒ‰é’®å°ºå¯¸ */
  size?: 'small' | 'medium' | 'large'
  /** æ˜¯å¦ä¸ºå—çº§æŒ‰é’® */
  block?: boolean
  /** åŠ è½½çŠ¶æ€ */
  loading?: boolean
  /** å›¾æ ‡ */
  icon?: React.ReactNode
  /** å›¾æ ‡ä½ç½® */
  iconPosition?: 'left' | 'right'
  /** æŒ‰é’®å½¢çŠ¶ */
  shape?: 'default' | 'round' | 'circle'
}

export const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  (
    {
      variant = 'primary',
      size = 'medium',
      block = false,
      loading = false,
      icon,
      iconPosition = 'left',
      shape = 'default',
      children,
      className,
      disabled,
      ...props
    },
    ref
  ) => {
    const buttonClass = clsx(
      styles.button,
      styles[`button--${variant}`],
      styles[`button--${size}`],
      {
        [styles['button--block']]: block,
        [styles['button--loading']]: loading,
        [styles[`button--${shape}`]]: shape !== 'default',
        [styles['button--icon-only']]: !children && (icon || loading),
      },
      className
    )

    const iconElement = loading ? <Icon name="loading" spin /> : icon
    
    const content = (
      <>
        {iconElement && iconPosition === 'left' && (
          <span className={styles.button__icon}>{iconElement}</span>
        )}
        {children && <span className={styles.button__text}>{children}</span>}
        {iconElement && iconPosition === 'right' && (
          <span className={styles.button__icon}>{iconElement}</span>
        )}
      </>
    )

    return (
      <button
        ref={ref}
        className={buttonClass}
        disabled={disabled || loading}
        {...props}
      >
        {content}
      </button>
    )
  }
)

Button.displayName = 'Button'
```

### 2.2 æ•°æ®å½•å…¥ç»„ä»¶ - Upload

```typescript
// packages/components/src/components/data-entry/Upload/Upload.tsx
import React, { useRef, useState } from 'react'
import { clsx } from 'clsx'
import { Button } from '../../general/Button'
import { Icon } from '../../general/Icon'
import styles from './Upload.module.scss'

export interface UploadFile {
  uid: string
  name: string
  size: number
  type: string
  status: 'uploading' | 'done' | 'error'
  percent?: number
  url?: string
  originFileObj?: File
  response?: any
  error?: any
}

export interface UploadProps {
  /** æ¥å—çš„æ–‡ä»¶ç±»å‹ */
  accept?: string
  /** æ˜¯å¦æ”¯æŒå¤šé€‰ */
  multiple?: boolean
  /** æœ€å¤§æ–‡ä»¶æ•°é‡ */
  maxCount?: number
  /** æ–‡ä»¶å¤§å°é™åˆ¶ */
  maxSize?: number
  /** æ–‡ä»¶åˆ—è¡¨ */
  fileList?: UploadFile[]
  /** é»˜è®¤æ–‡ä»¶åˆ—è¡¨ */
  defaultFileList?: UploadFile[]
  /** ä¸Šä¼ å‰çš„é’©å­ */
  beforeUpload?: (file: File, fileList: File[]) => boolean | Promise<boolean>
  /** è‡ªå®šä¹‰ä¸Šä¼ æ–¹æ³• */
  customRequest?: (options: any) => void
  /** ä¸Šä¼ æ–‡ä»¶æ”¹å˜æ—¶çš„å›è°ƒ */
  onChange?: (info: { file: UploadFile; fileList: UploadFile[] }) => void
  /** ç‚¹å‡»ç§»é™¤æ–‡ä»¶æ—¶çš„å›è°ƒ */
  onRemove?: (file: UploadFile) => boolean | Promise<boolean>
  /** ä¸Šä¼ åˆ—è¡¨çš„å†…å»ºæ ·å¼ */
  listType?: 'text' | 'picture' | 'picture-card'
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean
  /** æ‹–æ‹½ä¸Šä¼  */
  dragable?: boolean
  children?: React.ReactNode
}

export const Upload: React.FC<UploadProps> = ({
  accept,
  multiple = false,
  maxCount = Infinity,
  maxSize,
  fileList,
  defaultFileList = [],
  beforeUpload,
  customRequest,
  onChange,
  onRemove,
  listType = 'text',
  disabled = false,
  dragable = false,
  children,
}) => {
  const [internalFileList, setInternalFileList] = useState<UploadFile[]>(
    fileList || defaultFileList
  )
  const fileInputRef = useRef<HTMLInputElement>(null)
  const [dragOver, setDragOver] = useState(false)

  const currentFileList = fileList || internalFileList

  const handleClick = () => {
    if (disabled) return
    fileInputRef.current?.click()
  }

  const handleFileChange = async (event: React.ChangeEvent<HTMLInputElement>) => {
    const files = Array.from(event.target.files || [])
    await processFiles(files)
    // æ¸…ç©º input å€¼ï¼Œå…è®¸é‡å¤é€‰æ‹©åŒä¸€æ–‡ä»¶
    if (fileInputRef.current) {
      fileInputRef.current.value = ''
    }
  }

  const handleDrop = async (event: React.DragEvent) => {
    event.preventDefault()
    setDragOver(false)
    
    if (disabled) return
    
    const files = Array.from(event.dataTransfer.files)
    await processFiles(files)
  }

  const processFiles = async (files: File[]) => {
    for (const file of files) {
      if (currentFileList.length >= maxCount) {
        console.warn('è¶…å‡ºæœ€å¤§æ–‡ä»¶æ•°é‡é™åˆ¶')
        break
      }

      // æ–‡ä»¶å¤§å°æ£€æŸ¥
      if (maxSize && file.size > maxSize) {
        console.warn(`æ–‡ä»¶ ${file.name} å¤§å°è¶…å‡ºé™åˆ¶`)
        continue
      }

      // ä¸Šä¼ å‰é’©å­æ£€æŸ¥
      if (beforeUpload) {
        const shouldUpload = await beforeUpload(file, files)
        if (!shouldUpload) continue
      }

      const uploadFile: UploadFile = {
        uid: `${Date.now()}-${Math.random()}`,
        name: file.name,
        size: file.size,
        type: file.type,
        status: 'uploading',
        percent: 0,
        originFileObj: file,
      }

      const newFileList = [...currentFileList, uploadFile]
      
      if (!fileList) {
        setInternalFileList(newFileList)
      }
      
      onChange?.({ file: uploadFile, fileList: newFileList })

      // æ‰§è¡Œä¸Šä¼ 
      if (customRequest) {
        customRequest({
          file,
          onProgress: (percent: number) => {
            const updatedFile = { ...uploadFile, percent }
            updateFileInList(uploadFile.uid, updatedFile)
          },
          onSuccess: (response: any) => {
            const updatedFile = { 
              ...uploadFile, 
              status: 'done' as const, 
              percent: 100,
              response 
            }
            updateFileInList(uploadFile.uid, updatedFile)
          },
          onError: (error: any) => {
            const updatedFile = { 
              ...uploadFile, 
              status: 'error' as const, 
              error 
            }
            updateFileInList(uploadFile.uid, updatedFile)
          },
        })
      }
    }
  }

  const updateFileInList = (uid: string, updatedFile: UploadFile) => {
    const newFileList = currentFileList.map(file => 
      file.uid === uid ? updatedFile : file
    )
    
    if (!fileList) {
      setInternalFileList(newFileList)
    }
    
    onChange?.({ file: updatedFile, fileList: newFileList })
  }

  const handleRemove = async (file: UploadFile) => {
    if (onRemove) {
      const shouldRemove = await onRemove(file)
      if (!shouldRemove) return
    }

    const newFileList = currentFileList.filter(item => item.uid !== file.uid)
    
    if (!fileList) {
      setInternalFileList(newFileList)
    }
    
    onChange?.({ file, fileList: newFileList })
  }

  const uploadClass = clsx(
    styles.upload,
    styles[`upload--${listType}`],
    {
      [styles['upload--disabled']]: disabled,
      [styles['upload--drag']]: dragable,
      [styles['upload--drag-over']]: dragOver,
    }
  )

  const renderUploadButton = () => {
    if (listType === 'picture-card') {
      return (
        <div className={styles['upload-select']}>
          <Icon name="plus" />
          <div className={styles['upload-text']}>Upload</div>
        </div>
      )
    }

    return children || (
      <Button icon={<Icon name="upload" />} disabled={disabled}>
        ç‚¹å‡»ä¸Šä¼ 
      </Button>
    )
  }

  const renderFileList = () => {
    if (!currentFileList.length) return null

    return (
      <div className={styles['upload-list']}>
        {currentFileList.map(file => (
          <div key={file.uid} className={styles['upload-list-item']}>
            <div className={styles['upload-list-item-info']}>
              <Icon name={getFileIcon(file.type)} />
              <span className={styles['upload-list-item-name']}>{file.name}</span>
              {file.status === 'uploading' && (
                <div className={styles['upload-progress']}>
                  <div 
                    className={styles['upload-progress-bar']}
                    style={{ width: `${file.percent}%` }}
                  />
                </div>
              )}
            </div>
            <div className={styles['upload-list-item-actions']}>
              {file.status === 'done' && file.url && (
                <Icon name="eye" onClick={() => window.open(file.url)} />
              )}
              <Icon 
                name="delete" 
                onClick={() => handleRemove(file)} 
              />
            </div>
          </div>
        ))}
      </div>
    )
  }

  const getFileIcon = (fileType: string): string => {
    if (fileType.startsWith('image/')) return 'file-image'
    if (fileType.includes('pdf')) return 'file-pdf'
    if (fileType.includes('word')) return 'file-word'
    return 'file'
  }

  return (
    <div className={uploadClass}>
      <input
        ref={fileInputRef}
        type="file"
        accept={accept}
        multiple={multiple}
        onChange={handleFileChange}
        style={{ display: 'none' }}
      />
      
      {dragable ? (
        <div
          className={styles['upload-drag']}
          onClick={handleClick}
          onDrop={handleDrop}
          onDragOver={(e) => {
            e.preventDefault()
            setDragOver(true)
          }}
          onDragLeave={() => setDragOver(false)}
        >
          <div className={styles['upload-drag-content']}>
            <Icon name="inbox" size="large" />
            <p>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤åŒºåŸŸä¸Šä¼ </p>
          </div>
        </div>
      ) : (
        <div onClick={handleClick}>
          {renderUploadButton()}
        </div>
      )}
      
      {renderFileList()}
    </div>
  )
}

const getFileIcon = (fileType: string): string => {
  if (fileType.startsWith('image/')) return 'file-image'
  if (fileType.includes('pdf')) return 'file-pdf'
  if (fileType.includes('word')) return 'file-word'
  return 'file'
}
```

### 2.3 æ•°æ®å½•å…¥ç»„ä»¶ - AutoComplete

```typescript
// packages/components/src/components/data-entry/AutoComplete/AutoComplete.tsx
import React, { useState, useRef, useEffect } from 'react'
import { clsx } from 'clsx'
import { Input } from '../Input'
import { useClickOutside } from '../../../hooks/useClickOutside'
import styles from './AutoComplete.module.scss'

export interface AutoCompleteOption {
  label: string
  value: string
  disabled?: boolean
  [key: string]: any
}

export interface AutoCompleteProps {
  /** è¾“å…¥æ¡†å€¼ */
  value?: string
  /** é»˜è®¤å€¼ */
  defaultValue?: string
  /** æ•°æ®æº */
  options?: AutoCompleteOption[]
  /** è¾“å…¥æ¡†å ä½ç¬¦ */
  placeholder?: string
  /** æ˜¯å¦ç¦ç”¨ */
  disabled?: boolean
  /** æ˜¯å¦æ˜¾ç¤ºæ¸…é™¤æŒ‰é’® */
  allowClear?: boolean
  /** è¾“å…¥æ¡†å˜åŒ–å›è°ƒ */
  onChange?: (value: string) => void
  /** é€‰æ‹©é€‰é¡¹å›è°ƒ */
  onSelect?: (value: string, option: AutoCompleteOption) => void
  /** æœç´¢å›è°ƒ */
  onSearch?: (value: string) => void
  /** è‡ªå®šä¹‰è¿‡æ»¤æ–¹æ³• */
  filterOption?: (inputValue: string, option: AutoCompleteOption) => boolean
  /** è‡ªå®šä¹‰æ¸²æŸ“é€‰é¡¹ */
  renderOption?: (option: AutoCompleteOption) => React.ReactNode
  /** æ— æ•°æ®æ—¶æ˜¾ç¤ºå†…å®¹ */
  notFoundContent?: React.ReactNode
  /** æœ€å¤§æ˜¾ç¤ºé€‰é¡¹æ•° */
  maxCount?: number
  /** è¾“å…¥æ¡†å°ºå¯¸ */
  size?: 'small' | 'medium' | 'large'
}

export const AutoComplete: React.FC<AutoCompleteProps> = ({
  value,
  defaultValue = '',
  options = [],
  placeholder,
  disabled = false,
  allowClear = false,
  onChange,
  onSelect,
  onSearch,
  filterOption,
  renderOption,
  notFoundContent = 'æ— åŒ¹é…ç»“æœ',
  maxCount = 50,
  size = 'medium',
}) => {
  const [internalValue, setInternalValue] = useState(value || defaultValue)
  const [isOpen, setIsOpen] = useState(false)
  const [activeIndex, setActiveIndex] = useState(-1)
  
  const containerRef = useRef<HTMLDivElement>(null)
  const inputRef = useRef<HTMLInputElement>(null)
  const listRef = useRef<HTMLUListElement>(null)

  const currentValue = value !== undefined ? value : internalValue

  useClickOutside(containerRef, () => {
    setIsOpen(false)
    setActiveIndex(-1)
  })

  // è¿‡æ»¤é€‰é¡¹
  const filteredOptions = React.useMemo(() => {
    if (!currentValue.trim()) return options.slice(0, maxCount)

    const filtered = options.filter(option => {
      if (filterOption) {
        return filterOption(currentValue, option)
      }
      return option.label.toLowerCase().includes(currentValue.toLowerCase())
    })

    return filtered.slice(0, maxCount)
  }, [currentValue, options, filterOption, maxCount])

  // å¤„ç†è¾“å…¥å˜åŒ–
  const handleInputChange = (inputValue: string) => {
    if (value === undefined) {
      setInternalValue(inputValue)
    }
    onChange?.(inputValue)
    onSearch?.(inputValue)
    
    setIsOpen(true)
    setActiveIndex(-1)
  }

  // å¤„ç†é€‰é¡¹é€‰æ‹©
  const handleOptionSelect = (option: AutoCompleteOption) => {
    if (option.disabled) return

    const newValue = option.value
    
    if (value === undefined) {
      setInternalValue(newValue)
    }
    
    onChange?.(newValue)
    onSelect?.(newValue, option)
    setIsOpen(false)
    setActiveIndex(-1)
    
    // èšç„¦è¾“å…¥æ¡†
    inputRef.current?.focus()
  }

  // å¤„ç†é”®ç›˜å¯¼èˆª
  const handleKeyDown = (event: React.KeyboardEvent) => {
    const { key } = event

    if (!isOpen) {
      if (key === 'ArrowDown' || key === 'Enter') {
        setIsOpen(true)
        return
      }
      return
    }

    switch (key) {
      case 'ArrowDown':
        event.preventDefault()
        setActiveIndex(prev => 
          prev < filteredOptions.length - 1 ? prev + 1 : 0
        )
        break

      case 'ArrowUp':
        event.preventDefault()
        setActiveIndex(prev => 
          prev > 0 ? prev - 1 : filteredOptions.length - 1
        )
        break

      case 'Enter':
        event.preventDefault()
        if (activeIndex >= 0 && filteredOptions[activeIndex]) {
          handleOptionSelect(filteredOptions[activeIndex])
        }
        break

      case 'Escape':
        setIsOpen(false)
        setActiveIndex(-1)
        break

      case 'Tab':
        setIsOpen(false)
        setActiveIndex(-1)
        break
    }
  }

  // æ»šåŠ¨æ´»è·ƒé€‰é¡¹åˆ°è§†å›¾ä¸­
  useEffect(() => {
    if (activeIndex >= 0 && listRef.current) {
      const activeElement = listRef.current.children[activeIndex] as HTMLElement
      if (activeElement) {
        activeElement.scrollIntoView({
          block: 'nearest',
          inline: 'nearest',
        })
      }
    }
  }, [activeIndex])

  // æ¸²æŸ“é€‰é¡¹
  const renderOptions = () => {
    if (!isOpen) return null

    if (filteredOptions.length === 0) {
      return (
        <div className={styles['autocomplete-dropdown']}>
          <div className={styles['autocomplete-empty']}>
            {notFoundContent}
          </div>
        </div>
      )
    }

    return (
      <div className={styles['autocomplete-dropdown']}>
        <ul ref={listRef} className={styles['autocomplete-list']}>
          {filteredOptions.map((option, index) => {
            const isActive = index === activeIndex
            const optionClass = clsx(
              styles['autocomplete-option'],
              {
                [styles['autocomplete-option--active']]: isActive,
                [styles['autocomplete-option--disabled']]: option.disabled,
              }
            )

            return (
              <li
                key={option.value}
                className={optionClass}
                onClick={() => handleOptionSelect(option)}
                onMouseEnter={() => setActiveIndex(index)}
              >
                {renderOption ? renderOption(option) : option.label}
              </li>
            )
          })}
        </ul>
      </div>
    )
  }

  return (
    <div 
      ref={containerRef}
      className={clsx(styles.autocomplete, {
        [styles['autocomplete--open']]: isOpen,
      })}
    >
      <Input
        ref={inputRef}
        value={currentValue}
        placeholder={placeholder}
        disabled={disabled}
        allowClear={allowClear}
        size={size}
        onChange={handleInputChange}
        onKeyDown={handleKeyDown}
        onFocus={() => setIsOpen(true)}
        autoComplete="off"
      />
      {renderOptions()}
    </div>
  )
}
```

---

## ğŸ› ï¸ Phase 3: ä»£ç è´¨é‡å·¥å…·é…ç½®

### 3.1 ESLint v9 å¹³é¢é…ç½®

```javascript
// tools/eslint-config/index.js
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'
import eslintConfigPrettier from 'eslint-config-prettier'
import react from 'eslint-plugin-react'

export default tseslint.config(
  { 
    ignores: [
      'dist',
      'node_modules',
      '.storybook',
      'coverage',
      '**/*.d.ts'
    ] 
  },
  {
    extends: [
      js.configs.recommended,
      ...tseslint.configs.recommended,
      ...tseslint.configs.recommendedTypeChecked,
      eslintConfigPrettier
    ],
    files: ['**/*.{ts,tsx,js,jsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      globals: {
        ...globals.browser,
        ...globals.node,
      },
      parserOptions: {
        project: ['./tsconfig.json', './packages/*/tsconfig.json'],
        tsconfigRootDir: import.meta.dirname,
      },
    },
    plugins: {
      react,
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
      'react/react-in-jsx-scope': 'off',
      'react/prop-types': 'off',
      '@typescript-eslint/no-unused-vars': [
        'warn',
        { argsIgnorePattern: '^_' }
      ],
      '@typescript-eslint/explicit-function-return-type': 'off',
      '@typescript-eslint/explicit-module-boundary-types': 'off',
      '@typescript-eslint/no-explicit-any': 'warn',
      '@typescript-eslint/prefer-const': 'error',
      'prefer-const': 'error',
      'no-var': 'error',
    },
    settings: {
      react: {
        version: 'detect',
      },
    },
  },
  {
    files: ['**/*.test.{ts,tsx}', '**/*.spec.{ts,tsx}'],
    rules: {
      '@typescript-eslint/no-explicit-any': 'off',
    },
  }
)
```

### 3.2 Stylelint é…ç½®

```javascript
// tools/stylelint-config/index.js  
export default {
  extends: [
    'stylelint-config-standard-scss',
    'stylelint-config-prettier-scss'
  ],
  rules: {
    'selector-class-pattern': [
      '^[a-z]([a-z0-9-]+)?(__([a-z0-9]+-?)+)?(--([a-z0-9]+-?)+){0,2}$',
      {
        message: 'Expected class selector to be kebab-case with BEM methodology'
      }
    ],
    'scss/at-rule-no-unknown': [
      true,
      {
        ignoreAtRules: ['tailwind', 'apply', 'layer']
      }
    ],
    'custom-property-pattern': '^[a-z]([a-z0-9-]+)*$',
    'keyframes-name-pattern': '^[a-z]([a-z0-9-]+)*$',
    'scss/dollar-variable-pattern': '^[a-z]([a-z0-9-]+)*$',
    'scss/percent-placeholder-pattern': '^[a-z]([
