## 1. 一键生成项目
1.1 执行这行命令，将使用 Vite 快速创建一个名为 account-book-react 的基于 React 的项目模版：
```shell
npm create vite@latest account-book-react -- --template react
```

1.2 切换到account-book-react目录下，执行下列命令，将读取 package.json 文件中所有依赖包，并将其安装至node_modules中：
```shell
npm install
```

1.3 此时执行下列命令即可启动项目：
```shell
npm run dev
```

## 2. 添加路由
2.1 安装 React 路由库 react-router-dom 并将其添加到生产依赖中：
```shell
npm install react-router-dom --save
```

2.2 在 src 目录下创建 container 目录用于放置页面组件，在 container 目录下创建两个目录 Index 和 About：
```shell
cd src
mkdir -p container/Index container/About
```

2.3 添加代码，将导出两个函数式组件index、about：
```jsx
// src/container/Index/index.jsx
import React from 'react';

export default function Index() {
  return <div>Index</div>;
}

// src/container/About/index.jsx
import React from 'react';

export default function About() {
  return <div>About</div>;
}
```

2.4 将路由配置抽离到一个独立文件 src/router/index.js：
```js
import Index from '../container/Index'
import About from '../container/About'

const routes = [ // 路由数组
  {
    path: "/",
    component: Index
  },
  {
    path: "/about",
    component: About
  }
];

export default routes;
```

2.5 在 App.jsx 引入路由配置，实现切换浏览器路径，显示相应的组件：
```jsx
// 原App.jsx代码替换为下列代码：
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import routes from '../src/router'; // 引入路由配置，实现切换浏览器路径，显示相应的组件

function App() {
  return (
    <Router>
      <Routes>
        {routes.map(route => (
          <Route
            key={route.path}
            path={route.path}
            element={<route.component />}
          />
        ))}
      </Routes>
    </Router>
  );
}

export default App;
```
注意：目录路径不要有中文，否则Vite 可能解析失败。
> 见[dayLearn/5_28 相对路径与配置路径别名.md](https://github.com/liuyi-arch/StudyNotes/blob/main/dayLearn/5_28%20%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E4%B8%8E%E9%85%8D%E7%BD%AE%E8%B7%AF%E5%BE%84%E5%88%AB%E5%90%8D.md)

## 3. 引入 Zarm UI 组件库
```shell
npm install zarm -S
```

修改 App.jsx 的代码，全局引入样式和中文包：
```jsx
// src/App.jsx
import React from 'react';
import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';
import { ConfigProvider } from 'zarm';
import zhCN from 'zarm/lib/config-provider/locale/zh_CN';
import 'zarm/dist/zarm.css';

import routes from '@/router'; 

function App() {
  return (
    <Router>
      <ConfigProvider primaryColor="#007fff" locale={zhCN}>
        <Routes>
          {routes.map((route) => (
            <Route
              key={route.path}
              path={route.path}
              element={<route.component />}
            />
          ))}
        </Routes>
      </ConfigProvider>
    </Router>
  );
}

export default App;
```
> Zarm 的组件库通常适用于移动端，桌面浏览器，推荐使用 Ant Design.
> ConfigProvider 用于统一设置整个应用的主题/样式（如主色调）和语言（如中文）。

## 4. 优化组件库按需引入
4.1 安装按需引入插件，在打包时自动检测所用到的组件，只引入用到的 CSS：
```shell
npm i vite-plugin-style-import -D
```

4.2 配置 vite.config.js
```js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { createStyleImportPlugin } from 'vite-plugin-style-import';

import path from 'path'; // 引入 path 模块

export default defineConfig({
  plugins: [
    react(),
    createStyleImportPlugin({ // 按需引入组件库
      libs: [
        {
          libraryName: 'zarm',
          esModule: true,
          resolveStyle: (name) => `zarm/es/${name}/style/css`,
        },
      ],
    }),
  ],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src'), // 配置 @ 指向 src 目录
    },
  },
});
```
> 全量引入组件库改为按需引入，前端性能优化的其中一种。

## 5. 配置 CSS 预处理器 Less
5.1 安装 less 插件包：
```shell
npm i less -D
```

5.2 修改 vite.config.js，如下：
```js
{
  plugins: [...]
  css: {
    modules: {
      localsConvention: 'dashesOnly' // CSS Modules 模式使用 dashes-only 命名风格（而不是驼峰形式dashesOnly）
    },
    preprocessorOptions: {
      less: {
        javascriptEnabled: true, // 允许 less 文件内使用 JS 表达式
      }
    }
  },
}
```
> 自定义 Zarm 样式/只用 less，然后通过 modifyVars 覆盖默认主题变量？

5.3 在 src/container/Index/style.module.less 中添加局部样式：
```less
.index { // .index中所有 <span> 元素的文字颜色将变成红色
  span {
    color: red;
  }
}
```

5.4 在src/container/Index/index.jsx组件中使用 CSS Modules 样式，即 zarm 组件和本地模块化样式：
```jsx
import React from 'react'
import { Button } from 'zarm' // 引入了 Zarm UI 框架中的 Button 组件
import s from './style.module.less' // 将 .less 中定义的类名转化为一个 JS 对象（如：s.index），从而避免了全局样式污染，s 是自定义的对象名

export default function Index() {
  return (
    // className={s.index} 实际渲染出来的类名会被编译成一个唯一的哈希名，比如：index__index__abc123，不会跟其他地方 .index 冲突
    <div className={s.index}>
      <span>样式</span>
      <Button theme='primary'>按钮</Button>
    </div>
  )
}
```
> 实现「组件级样式自定义」或「主题切换（比如夜间模式）」?

## 6. 移动端项目适配 rem
6.1 安装 lib-flexible，根据设备的宽度自动设置 HTML 的 font-size，实现 rem 单位的响应式布局：
```shell
npm i lib-flexible -S
```
> lib-flexible 是阿里团队开发的一个适用于移动端页面的 自适应布局解决方案，根据设备的宽度自动设置 HTML 的 font-size，从而实现 rem 单位的响应式布局。
> 更现代的解决方案？

6.2 在 main.jsx 中引入lib-flexible：
```jsx
import React from 'react'
import ReactDOM from 'react-dom'
import 'lib-flexible/flexible' // 引入 lib-flexible，根据屏幕宽度自动设置 <html> 标签的 font-size，实现移动端适配。必须在其他 CSS/JS 之前引入!
import './index.css'
import App from './App'

ReactDOM.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
  document.getElementById('root')
)
```

6.3 安装 postcss-pxtorem：
```shell
npm i postcss-pxtorem -D
```
> 一个 PostCSS 插件，它会自动将 CSS 中的 px 单位转为 rem 单位，从而配合 lib-flexible 实现移动端自适应布局。

6.4 项目根目录新建 postcss.config.js：
```js
module.exports = {
  plugins: [
    require("postcss-pxtorem")({
      rootValue: 37.5,               // 设计稿是 375px 宽，rootValue 设置为 37.5
      propList: ['*'],              // 所有 CSS 属性都进行转换
      selectorBlackList: ['.norem'] // 类名包含 .norem 的元素将不会被转换
    })
  ]
}
```











